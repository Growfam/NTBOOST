üìö SocialBoost Interface Bot - –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
üìã –ó–º—ñ—Å—Ç

–û–≥–ª—è–¥ –ø—Ä–æ–µ–∫—Ç—É
–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏
–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏
API Reference
–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
Telegram Bot
–°–∏—Å—Ç–µ–º–∏ –ø–ª–∞—Ç–µ–∂—ñ–≤
–ö–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
–ë–µ–∑–ø–µ–∫–∞
Deployment
–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è
Troubleshooting
–î–æ–¥–∞—Ç–∫–∏


1. –û–≥–ª—è–¥ –ø—Ä–æ–µ–∫—Ç—É
1.1 –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
SocialBoost Interface Bot - —Ü–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –ø—Ä–æ—Å—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç—É –≤ —Å–æ—Ü—ñ–∞–ª—å–Ω–∏—Ö –º–µ—Ä–µ–∂–∞—Ö. –ü—Ä–æ–µ–∫—Ç —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –¥–≤–æ—Ö –æ—Å–Ω–æ–≤–Ω–∏—Ö —á–∞—Å—Ç–∏–Ω:

Interface Bot (—Ü–µ–π –ø—Ä–æ–µ–∫—Ç) - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±–æ—Ç –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
Main Processing Bot (–æ–∫—Ä–µ–º–∏–π –ø—Ä–æ–µ–∫—Ç) - –±–µ–∫–µ–Ω–¥ –±–æ—Ç –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞–∫—Ä—É—Ç–∫–∏

1.2 –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
–î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:

üì¶ –í–∏–±—ñ—Ä —Ç–∞ –ø—Ä–∏–¥–±–∞–Ω–Ω—è –ø–∞–∫–µ—Ç—ñ–≤ –ø—Ä–æ—Å—É–≤–∞–Ω–Ω—è
üí≥ –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É (USDT)
üîó –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤ –¥–ª—è –Ω–∞–∫—Ä—É—Ç–∫–∏
üìä –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—ó
üí¨ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

–î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤:

üìà –ü–µ—Ä–µ–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–Ω–æ—ó —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
üì¢ –ú–∞—Å–æ–≤–∞ —Ä–æ–∑—Å–∏–ª–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
üîß –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–∞–∫–µ—Ç–∞–º–∏ —Ç–∞ —Ü—ñ–Ω–∞–º–∏
üìù –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∑–∞–º–æ–≤–ª–µ–Ω—å —Ç–∞ –ø–ª–∞—Ç–µ–∂—ñ–≤
üö® –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–æ –Ω–æ–≤—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

1.3 –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è–í–µ—Ä—Å—ñ—è–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—èBackend FrameworkFlask2.3.3REST API —Ç–∞ webhooksTelegram Botaiogram3.2.0–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π Telegram –±–æ—ÇDatabasePostgreSQL/Supabase2.0.3–û—Å–Ω–æ–≤–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—ÖCacheRedis5.0.1–ö–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ FSM storagePaymentsCryptoBot API-–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ñ –ø–ª–∞—Ç–µ–∂—ñHTTP Clientaiohttp/requests3.8.6/2.31.0API –∑–∞–ø–∏—Ç–∏Loggingstructlog23.1.0–°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—èTask QueueCustom PostgreSQL-–ß–µ—Ä–≥–∞ –∑–∞–≤–¥–∞–Ω—åDeploymentDocker/Gunicorn-–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è —Ç–∞ –ø—Ä–æ–¥–∞–∫—à–Ω

2. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏
2.1 –í–∏—Å–æ–∫–æ—Ä—ñ–≤–Ω–µ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         –ö–û–†–ò–°–¢–£–í–ê–ß–Ü                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ                 ‚îÇ
                    ‚îÇ  Telegram API   ‚îÇ
                    ‚îÇ                 ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                    ‚îÇ                    ‚îÇ
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ           ‚îÇ      ‚îÇ            ‚îÇ      ‚îÇ            ‚îÇ
   ‚îÇ  Polling  ‚îÇ      ‚îÇ  Webhook   ‚îÇ      ‚îÇ  CryptoBot ‚îÇ
   ‚îÇ   Mode    ‚îÇ      ‚îÇ    Mode    ‚îÇ      ‚îÇ  Webhooks  ‚îÇ
   ‚îÇ           ‚îÇ      ‚îÇ            ‚îÇ      ‚îÇ            ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                   ‚îÇ                    ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ                     ‚îÇ
                 ‚îÇ  INTERFACE BOT      ‚îÇ
                 ‚îÇ                     ‚îÇ
                 ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
                 ‚îÇ ‚îÇ   Bot Handlers  ‚îÇ ‚îÇ
                 ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ
                 ‚îÇ ‚îÇ   Flask API     ‚îÇ ‚îÇ
                 ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ
                 ‚îÇ ‚îÇ    Services     ‚îÇ ‚îÇ
                 ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
                 ‚îÇ                     ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ                      ‚îÇ                      ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         ‚îÇ          ‚îÇ            ‚îÇ         ‚îÇ            ‚îÇ
‚îÇ Supabase‚îÇ          ‚îÇ   Redis    ‚îÇ         ‚îÇ  Main Bot  ‚îÇ
‚îÇ   DB    ‚îÇ          ‚îÇ   Cache    ‚îÇ         ‚îÇ    API     ‚îÇ
‚îÇ         ‚îÇ          ‚îÇ            ‚îÇ         ‚îÇ            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
2.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
2.2.1 Frontend Layer (Telegram Bot)

Handlers - –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥ —Ç–∞ callback –∑–∞–ø–∏—Ç—ñ–≤
Keyboards - Inline –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
States - FSM —Å—Ç–∞–Ω–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥—ñ–∞–ª–æ–≥–∞–º–∏
Validators - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤–≤–æ–¥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

2.2.2 API Layer (Flask)

Webhooks - –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –¥–ª—è Telegram —Ç–∞ CryptoBot
Health Checks - –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–Ω—É —Å–∏—Å—Ç–µ–º–∏
Admin API - API –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
Integration API - API –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ Main Bot

2.2.3 Business Logic Layer

UserService - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
OrderService - –û–±—Ä–æ–±–∫–∞ –∑–∞–º–æ–≤–ª–µ–Ω—å
PaymentService - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ø–ª–∞—Ç—ñ–∂–Ω–æ—é —Å–∏—Å—Ç–µ–º–æ—é
ExternalService - –í–∑–∞—î–º–æ–¥—ñ—è –∑ Main Bot
CacheService - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–µ—à—É–≤–∞–Ω–Ω—è–º

2.2.4 Data Access Layer

Database Connection - –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Supabase
Redis Cache - –®–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö
Stored Procedures - PostgreSQL —Ñ—É–Ω–∫—Ü—ñ—ó

2.3 –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–∏—Ö
2.3.1 –ü–æ—Ç—ñ–∫ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
User -> /start -> Bot Handler -> UserService -> Database -> Cache -> Response
2.3.2 –ü–æ—Ç—ñ–∫ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
User -> Select Package -> Create Order -> Generate Invoice -> CryptoBot API -> Payment URL
2.3.3 –ü–æ—Ç—ñ–∫ –æ–±—Ä–æ–±–∫–∏ –ø–ª–∞—Ç–µ–∂—É
CryptoBot -> Webhook -> Verify Signature -> Update Order -> Activate Package -> Notify User
2.3.4 –ü–æ—Ç—ñ–∫ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ—Å—Ç–∞
User -> Add Post -> Validate URL -> Create Task -> Send to Queue -> Main Bot API -> Processing

3. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
3.1 –°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏
–ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –≤–∏–º–æ–≥–∏:

OS: Linux (Ubuntu 20.04+), macOS, Windows 10+
Python: 3.11 –∞–±–æ –≤–∏—â–µ
RAM: 2 GB
Disk: 10 GB –≤—ñ–ª—å–Ω–æ–≥–æ –º—ñ—Å—Ü—è
Network: –°—Ç–∞–±—ñ–ª—å–Ω–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç –∑'—î–¥–Ω–∞–Ω–Ω—è

–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –≤–∏–º–æ–≥–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω:

OS: Ubuntu 22.04 LTS
Python: 3.11.5+
RAM: 4 GB+
CPU: 2+ cores
Disk: 20 GB+ SSD
Network: –í–∏–¥—ñ–ª–µ–Ω–∏–π IP, SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç

3.2 –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
–ó–æ–≤–Ω—ñ—à–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏:

Telegram Bot API - —Å—Ç–≤–æ—Ä—ñ—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
Supabase - –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –∞–∫–∞—É–Ω—Ç –Ω–∞ supabase.com
Redis - –ª–æ–∫–∞–ª—å–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–±–æ Redis Cloud
CryptoBot - –∞–∫–∞—É–Ω—Ç –Ω–∞ @CryptoBot

3.3 –ü–æ–∫—Ä–æ–∫–æ–≤–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
–ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
bash# –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
git clone https://github.com/your-repo/socialboost-bot.git
cd socialboost-bot

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
python3.11 -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
# Linux/macOS:
source venv/bin/activate
# Windows:
venv\Scripts\activate

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è pip
pip install --upgrade pip
–ö—Ä–æ–∫ 2: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
bash# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è production –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ (–¥–æ–¥–∞—Ç–∫–æ–≤–æ):
pip install pytest pytest-asyncio black flake8 mypy
–ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (Supabase)

–°—Ç–≤–æ—Ä—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ supabase.com
–ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ SQL Editor
–í–∏–∫–æ–Ω–∞–π—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å:

sql-- –¢–∞–±–ª–∏—Ü—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
CREATE TABLE users (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    telegram_id VARCHAR(50) UNIQUE NOT NULL,
    username VARCHAR(100),
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    balance DECIMAL(10,2) DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü—è –ø–∞–∫–µ—Ç—ñ–≤
CREATE TABLE packages (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    slug VARCHAR(50) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL,
    currency VARCHAR(10) DEFAULT 'USD',
    posts_per_day INTEGER DEFAULT 1,
    views_range VARCHAR(50),
    reactions_range VARCHAR(50),
    comments_range VARCHAR(50),
    reposts_range VARCHAR(50),
    features JSONB,
    category VARCHAR(50),
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü—è –∑–∞–º–æ–≤–ª–µ–Ω—å
CREATE TABLE orders (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    user_id UUID REFERENCES users(id),
    package_id UUID REFERENCES packages(id),
    amount DECIMAL(10,2) NOT NULL,
    currency VARCHAR(10) DEFAULT 'USD',
    status VARCHAR(50) DEFAULT 'pending',
    payment_method VARCHAR(50),
    payment_data JSONB,
    activated_at TIMESTAMP WITH TIME ZONE,
    expires_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü—è –ø–æ—Å—Ç—ñ–≤
CREATE TABLE posts (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    user_id UUID REFERENCES users(id),
    order_id UUID REFERENCES orders(id),
    url TEXT NOT NULL,
    platform VARCHAR(50) DEFAULT 'telegram',
    status VARCHAR(50) DEFAULT 'pending',
    metadata JSONB,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    processed_at TIMESTAMP WITH TIME ZONE
);

-- –¢–∞–±–ª–∏—Ü—è –∑–∞–≤–¥–∞–Ω—å
CREATE TABLE tasks (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    post_id UUID REFERENCES posts(id),
    status VARCHAR(50) DEFAULT 'created',
    external_task_id VARCHAR(100),
    request_data JSONB,
    response_data JSONB,
    attempts INTEGER DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    sent_at TIMESTAMP WITH TIME ZONE,
    completed_at TIMESTAMP WITH TIME ZONE
);

-- –Ü–Ω–¥–µ–∫—Å–∏ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
CREATE INDEX idx_users_telegram_id ON users(telegram_id);
CREATE INDEX idx_orders_user_id ON orders(user_id);
CREATE INDEX idx_orders_status ON orders(status);
CREATE INDEX idx_posts_user_id ON posts(user_id);
CREATE INDEX idx_posts_status ON posts(status);
CREATE INDEX idx_tasks_status ON tasks(status);
CREATE INDEX idx_tasks_post_id ON tasks(post_id);
–ö—Ä–æ–∫ 4: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è PostgreSQL —Ñ—É–Ω–∫—Ü—ñ–π
sql-- –§—É–Ω–∫—Ü—ñ—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
CREATE OR REPLACE FUNCTION get_user_stats(p_telegram_id VARCHAR)
RETURNS JSON AS $$
DECLARE
    v_result JSON;
BEGIN
    SELECT json_build_object(
        'user_id', u.id,
        'telegram_id', u.telegram_id,
        'username', u.username,
        'balance', u.balance,
        'total_spent', COALESCE(SUM(o.amount) FILTER (WHERE o.status = 'paid'), 0),
        'orders_count', COUNT(o.id),
        'posts_count', COUNT(p.id),
        'active_posts', COUNT(p.id) FILTER (WHERE p.status IN ('pending', 'processing')),
        'current_package', (
            SELECT json_build_object(
                'name', pkg.name,
                'expires_at', o2.expires_at,
                'posts_per_day', pkg.posts_per_day,
                'posts_used_today', (
                    SELECT COUNT(*) FROM posts p2 
                    WHERE p2.order_id = o2.id 
                    AND DATE(p2.created_at) = CURRENT_DATE
                ),
                'posts_remaining', pkg.posts_per_day - (
                    SELECT COUNT(*) FROM posts p2 
                    WHERE p2.order_id = o2.id 
                    AND DATE(p2.created_at) = CURRENT_DATE
                )
            )
            FROM orders o2
            JOIN packages pkg ON o2.package_id = pkg.id
            WHERE o2.user_id = u.id 
            AND o2.status = 'paid'
            AND o2.expires_at > NOW()
            ORDER BY o2.created_at DESC
            LIMIT 1
        )
    ) INTO v_result
    FROM users u
    LEFT JOIN orders o ON u.id = o.user_id
    LEFT JOIN posts p ON u.id = p.user_id
    WHERE u.telegram_id = p_telegram_id
    GROUP BY u.id, u.telegram_id, u.username, u.balance;
    
    RETURN v_result;
END;
$$ LANGUAGE plpgsql;

-- –§—É–Ω–∫—Ü—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
CREATE OR REPLACE FUNCTION create_order(
    p_telegram_id VARCHAR,
    p_package_slug VARCHAR
)
RETURNS JSON AS $$
DECLARE
    v_user_id UUID;
    v_package_id UUID;
    v_order_id UUID;
    v_package_data JSON;
BEGIN
    -- –û—Ç—Ä–∏–º—É—î–º–æ user_id
    SELECT id INTO v_user_id 
    FROM users 
    WHERE telegram_id = p_telegram_id;
    
    IF v_user_id IS NULL THEN
        RETURN json_build_object('success', false, 'error', 'User not found');
    END IF;
    
    -- –û—Ç—Ä–∏–º—É—î–º–æ package_id —Ç–∞ –¥–∞–Ω—ñ
    SELECT id, 
           json_build_object(
               'name', name,
               'price', price,
               'currency', currency
           ) INTO v_package_id, v_package_data
    FROM packages 
    WHERE slug = p_package_slug AND is_active = true;
    
    IF v_package_id IS NULL THEN
        RETURN json_build_object('success', false, 'error', 'Package not found');
    END IF;
    
    -- –°—Ç–≤–æ—Ä—é—î–º–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
    INSERT INTO orders (user_id, package_id, amount, currency, status)
    SELECT v_user_id, 
           v_package_id, 
           (v_package_data->>'price')::DECIMAL,
           v_package_data->>'currency',
           'pending'
    RETURNING id INTO v_order_id;
    
    RETURN json_build_object(
        'success', true,
        'order_id', v_order_id,
        'amount', (v_package_data->>'price')::DECIMAL,
        'currency', v_package_data->>'currency',
        'package_name', v_package_data->>'name'
    );
END;
$$ LANGUAGE plpgsql;

-- –§—É–Ω–∫—Ü—ñ—è –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
CREATE OR REPLACE FUNCTION activate_order(p_order_id VARCHAR)
RETURNS BOOLEAN AS $$
BEGIN
    UPDATE orders 
    SET status = 'paid',
        activated_at = NOW(),
        expires_at = NOW() + INTERVAL '30 days'
    WHERE id = p_order_id::UUID
    AND status = 'pending';
    
    RETURN FOUND;
END;
$$ LANGUAGE plpgsql;

-- –§—É–Ω–∫—Ü—ñ—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ—Å—Ç–∞
CREATE OR REPLACE FUNCTION add_user_post_v2(
    p_user_id UUID,
    p_post_url TEXT,
    p_platform VARCHAR DEFAULT 'telegram'
)
RETURNS JSON AS $$
DECLARE
    v_order_id UUID;
    v_post_id UUID;
    v_task_id UUID;
    v_posts_limit INTEGER;
    v_posts_used INTEGER;
BEGIN
    -- –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∞–∫—Ç–∏–≤–Ω–∏–π –ø–∞–∫–µ—Ç
    SELECT o.id, pkg.posts_per_day INTO v_order_id, v_posts_limit
    FROM orders o
    JOIN packages pkg ON o.package_id = pkg.id
    WHERE o.user_id = p_user_id
    AND o.status = 'paid'
    AND o.expires_at > NOW()
    ORDER BY o.created_at DESC
    LIMIT 1;
    
    IF v_order_id IS NULL THEN
        RETURN json_build_object('success', false, 'error', 'No active package');
    END IF;
    
    -- –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –¥–µ–Ω–Ω–∏–π –ª—ñ–º—ñ—Ç
    SELECT COUNT(*) INTO v_posts_used
    FROM posts
    WHERE order_id = v_order_id
    AND DATE(created_at) = CURRENT_DATE;
    
    IF v_posts_used >= v_posts_limit THEN
        RETURN json_build_object('success', false, 'error', 'Daily limit reached');
    END IF;
    
    -- –°—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Å—Ç
    INSERT INTO posts (user_id, order_id, url, platform, status)
    VALUES (p_user_id, v_order_id, p_post_url, p_platform, 'pending')
    RETURNING id INTO v_post_id;
    
    -- –°—Ç–≤–æ—Ä—é—î–º–æ –∑–∞–≤–¥–∞–Ω–Ω—è
    INSERT INTO tasks (post_id, status)
    VALUES (v_post_id, 'created')
    RETURNING id INTO v_task_id;
    
    RETURN json_build_object(
        'success', true,
        'post_id', v_post_id,
        'task_id', v_task_id
    );
END;
$$ LANGUAGE plpgsql;

-- –§—É–Ω–∫—Ü—ñ—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤
CREATE OR REPLACE FUNCTION get_available_packages()
RETURNS JSON AS $$
BEGIN
    RETURN json_agg(
        json_build_object(
            'id', id,
            'slug', slug,
            'name', name,
            'description', description,
            'price', price,
            'currency', currency,
            'posts_per_day', posts_per_day,
            'views_range', views_range,
            'reactions_range', reactions_range,
            'comments_range', comments_range,
            'reposts_range', reposts_range,
            'features', features,
            'category', category
        )
    )
    FROM packages
    WHERE is_active = true
    ORDER BY price ASC;
END;
$$ LANGUAGE plpgsql;

-- –§—É–Ω–∫—Ü—ñ—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å –¥–ª—è –æ–±—Ä–æ–±–∫–∏
CREATE OR REPLACE FUNCTION get_pending_tasks(p_limit INTEGER DEFAULT 10)
RETURNS JSON AS $$
BEGIN
    RETURN json_agg(
        json_build_object(
            'task_id', t.id,
            'post_data', json_build_object(
                'url', p.url,
                'platform', p.platform
            ),
            'user_data', json_build_object(
                'telegram_id', u.telegram_id,
                'username', u.username
            ),
            'package_data', json_build_object(
                'name', pkg.name,
                'features', pkg.features
            ),
            'created_at', t.created_at
        )
    )
    FROM tasks t
    JOIN posts p ON t.post_id = p.id
    JOIN users u ON p.user_id = u.id
    JOIN orders o ON p.order_id = o.id
    JOIN packages pkg ON o.package_id = pkg.id
    WHERE t.status = 'created'
    AND t.attempts < 3
    ORDER BY t.created_at ASC
    LIMIT p_limit;
END;
$$ LANGUAGE plpgsql;

-- –§—É–Ω–∫—Ü—ñ—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤
CREATE OR REPLACE FUNCTION get_admin_stats()
RETURNS JSON AS $$
DECLARE
    v_result JSON;
BEGIN
    SELECT json_build_object(
        'total_users', (SELECT COUNT(*) FROM users),
        'active_users', (
            SELECT COUNT(DISTINCT user_id) 
            FROM orders 
            WHERE status = 'paid' 
            AND expires_at > NOW()
        ),
        'total_orders', (SELECT COUNT(*) FROM orders),
        'paid_orders', (SELECT COUNT(*) FROM orders WHERE status = 'paid'),
        'total_revenue', (
            SELECT COALESCE(SUM(amount), 0) 
            FROM orders 
            WHERE status = 'paid'
        ),
        'total_posts', (SELECT COUNT(*) FROM posts),
        'active_posts', (
            SELECT COUNT(*) 
            FROM posts 
            WHERE status IN ('pending', 'processing')
        ),
        'completed_posts', (
            SELECT COUNT(*) 
            FROM posts 
            WHERE status = 'completed'
        ),
        'packages_count', (
            SELECT COUNT(*) 
            FROM packages 
            WHERE is_active = true
        ),
        'recent_orders', (
            SELECT json_agg(
                json_build_object(
                    'user_username', u.username,
                    'amount', o.amount,
                    'package_name', pkg.name,
                    'created_at', o.created_at
                )
            )
            FROM (
                SELECT * FROM orders 
                WHERE created_at > NOW() - INTERVAL '24 hours'
                ORDER BY created_at DESC 
                LIMIT 10
            ) o
            JOIN users u ON o.user_id = u.id
            JOIN packages pkg ON o.package_id = pkg.id
        )
    ) INTO v_result;
    
    RETURN v_result;
END;
$$ LANGUAGE plpgsql;
–ö—Ä–æ–∫ 5: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Redis
bash# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Redis (Ubuntu/Debian)
sudo apt update
sudo apt install redis-server

# –ó–∞–ø—É—Å–∫ Redis
sudo systemctl start redis-server
sudo systemctl enable redis-server

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
redis-cli ping
# –ú–∞—î –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏: PONG
–ö—Ä–æ–∫ 6: –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É:
env# ===== FLASK CONFIGURATION =====
FLASK_ENV=development
SECRET_KEY=your-secret-key-change-in-production-use-32-chars-min
PORT=8000
HOST=0.0.0.0

# ===== TELEGRAM BOT =====
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_WEBHOOK_URL=https://your-domain.com  # –ó–∞–ª–∏—à—Ç–µ –ø–æ—Ä–æ–∂–Ω—ñ–º –¥–ª—è polling

# ===== SUPABASE DATABASE =====
SUPABASE_URL=https://yourproject.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ===== REDIS CACHE =====
REDIS_URL=redis://localhost:6379/0

# ===== CRYPTOBOT PAYMENTS =====
CRYPTOBOT_TOKEN=your-cryptobot-token
CRYPTOBOT_WEBHOOK_SECRET=your-webhook-secret

# ===== MAIN BOT INTEGRATION =====
MAIN_BOT_API_URL=https://main-bot.example.com
MAIN_BOT_API_KEY=your-main-bot-api-key

# ===== ADMIN SETTINGS =====
ADMIN_TELEGRAM_IDS=123456789,987654321  # Telegram ID –∞–¥–º—ñ–Ω—ñ–≤
ADMIN_CHANNEL_ID=-1001234567890  # ID –∫–∞–Ω–∞–ª—É –¥–ª—è —Å–ø–æ–≤—ñ—â–µ–Ω—å

# ===== LOGGING =====
LOG_LEVEL=INFO
LOG_FILE=logs/bot.log
ERROR_LOG_FILE=logs/errors.log

# ===== CACHE SETTINGS =====
CACHE_TTL=300  # 5 —Ö–≤–∏–ª–∏–Ω
–ö—Ä–æ–∫ 7: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Telegram –±–æ—Ç–∞

–í—ñ–¥–∫—Ä–∏–π—Ç–µ @BotFather –≤ Telegram
–ù–∞–¥—ñ—à–ª—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É /newbot
–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: SocialBoost Bot)
–í–≤–µ–¥—ñ—Ç—å username –±–æ—Ç–∞ (–º–∞—î –∑–∞–∫—ñ–Ω—á—É–≤–∞—Ç–∏—Å—è –Ω–∞ _bot)
–ó–±–µ—Ä–µ–∂—ñ—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–∏–π —Ç–æ–∫–µ–Ω –≤ .env —Ñ–∞–π–ª

–ö—Ä–æ–∫ 8: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è CryptoBot

–í—ñ–¥–∫—Ä–∏–π—Ç–µ @CryptoBot
–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –¥–æ–¥–∞—Ç–æ–∫
–û—Ç—Ä–∏–º–∞–π—Ç–µ API —Ç–æ–∫–µ–Ω
–ù–∞–ª–∞—à—Ç—É–π—Ç–µ webhook URL (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ)

–ö—Ä–æ–∫ 9: –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤
sql-- –í—Å—Ç–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤
INSERT INTO packages (slug, name, description, price, currency, posts_per_day, 
                      views_range, reactions_range, comments_range, reposts_range, 
                      features, category) 
VALUES 
('starter-mini', 'Starter Mini', '–Ü–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ–≤', 99.99, 'USD', 2,
 '1000-2500', '15-27', '5-15', '3-11',
 '{"randomization": "30%", "immediate_delivery": "80% –∑–∞ 24 –≥–æ–¥–∏–Ω–∏", "delayed_delivery": "20% –ø—Ä–æ—Ç—è–≥–æ–º —Ç–∏–∂–Ω—è"}',
 'starter'),

('pro-advanced', 'Pro Advanced', '–î–ª—è –∞–∫—Ç–∏–≤–Ω–∏—Ö –±–ª–æ–≥–µ—Ä—ñ–≤', 299.99, 'USD', 3,
 '8000-15000', '60-120', '35-65', '19-41',
 '{"randomization": "30%", "immediate_delivery": "80% –∑–∞ 24 –≥–æ–¥–∏–Ω–∏", "delayed_delivery": "20% –ø—Ä–æ—Ç—è–≥–æ–º —Ç–∏–∂–Ω—è"}',
 'professional'),

('enterprise-elite', 'Enterprise Elite', '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–µ –æ—Ö–æ–ø–ª–µ–Ω–Ω—è', 999.99, 'USD', 3,
 '70000-120000', '400-700', '84-120', '72-108',
 '{"randomization": "30%", "immediate_delivery": "80% –∑–∞ 24 –≥–æ–¥–∏–Ω–∏", "delayed_delivery": "20% –ø—Ä–æ—Ç—è–≥–æ–º —Ç–∏–∂–Ω—è"}',
 'enterprise');

4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É
4.1 –î–µ—Ä–µ–≤–æ —Ñ–∞–π–ª—ñ–≤
socialboost-interface-bot/
‚îÇ
‚îú‚îÄ‚îÄ backend/                      # –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–¥ –±–µ–∫–µ–Ω–¥—É
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py              # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–∞–∫–µ—Ç—É
‚îÇ   ‚îú‚îÄ‚îÄ app.py                   # Flask –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ config.py                # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ–µ–∫—Ç—É
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ api/                     # API –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ health.py            # Health check endpoints
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ webhooks.py          # Webhook handlers
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ bot/                     # Telegram bot –∫–æ–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py              # –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/            # –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py        # /start —Ç–∞ –≥–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ packages.py     # –†–æ–±–æ—Ç–∞ –∑ –ø–∞–∫–µ—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders.py       # –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.py        # –ê–¥–º—ñ–Ω —Ñ—É–Ω–∫—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keyboards/           # –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ inline.py       # Inline –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ states/              # FSM —Å—Ç–∞–Ω–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ user_states.py  # –°—Ç–∞–Ω–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ database/                # –†–æ–±–æ—Ç–∞ –∑ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ connection.py       # –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Supabase
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ queries.py          # SQL –∑–∞–ø–∏—Ç–∏ (–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/                # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_service.py     # –°–µ—Ä–≤—ñ—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order_service.py    # –°–µ—Ä–≤—ñ—Å –∑–∞–º–æ–≤–ª–µ–Ω—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment_service.py  # –°–µ—Ä–≤—ñ—Å –ø–ª–∞—Ç–µ–∂—ñ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ external_service.py # –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Main Bot
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/                   # –£—Ç–∏–ª—ñ—Ç–∏
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ cache.py            # Redis –∫–µ—à—É–≤–∞–Ω–Ω—è
‚îÇ       ‚îú‚îÄ‚îÄ constants.py       # –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –ø—Ä–æ–µ–∫—Ç—É
‚îÇ       ‚îú‚îÄ‚îÄ logger.py          # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
‚îÇ       ‚îî‚îÄ‚îÄ validators.py      # –í–∞–ª—ñ–¥–∞—Ç–æ—Ä–∏ –¥–∞–Ω–∏—Ö
‚îÇ
‚îú‚îÄ‚îÄ logs/                        # –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è –¥–ª—è –ª–æ–≥—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ bot.log                 # –û—Å–Ω–æ–≤–Ω–∏–π –ª–æ–≥
‚îÇ   ‚îî‚îÄ‚îÄ errors.log              # –õ–æ–≥ –ø–æ–º–∏–ª–æ–∫
‚îÇ
‚îú‚îÄ‚îÄ tests/                       # –¢–µ—Å—Ç–∏ (–æ–ø—Ü—ñ–π–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_services.py
‚îÇ   ‚îî‚îÄ‚îÄ test_handlers.py
‚îÇ
‚îú‚îÄ‚îÄ .env                        # –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îú‚îÄ‚îÄ .env.example                # –ü—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö
‚îú‚îÄ‚îÄ .gitignore                  # –Ü–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è –¥–ª—è Git
‚îú‚îÄ‚îÄ Dockerfile                  # Docker –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose
‚îú‚îÄ‚îÄ requirements.txt            # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ main.py                     # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
‚îú‚îÄ‚îÄ minimal_bot.py              # –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ç–µ—Å—Ç–æ–≤–∏–π –±–æ—Ç
‚îú‚îÄ‚îÄ payment_bot.py              # –ë–æ—Ç –∑ –ø–ª–∞—Ç–µ–∂–∞–º–∏ (—Ç–µ—Å—Ç)
‚îú‚îÄ‚îÄ webhook_bot.py              # –ë–æ—Ç –∑ webhook (—Ç–µ—Å—Ç)
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
4.2 –û–ø–∏—Å –æ—Å–Ω–æ–≤–Ω–∏—Ö –º–æ–¥—É–ª—ñ–≤
4.2.1 main.py - –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
python# –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
- validate_environment()     # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
- run_bot()                  # –ó–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞
- run_flask_app()           # –ó–∞–ø—É—Å–∫ Flask —Å–µ—Ä–≤–µ—Ä–∞
- graceful_shutdown()       # –ö–æ—Ä–µ–∫—Ç–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
- setup_signal_handlers()   # –û–±—Ä–æ–±–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–∏—Ö —Å–∏–≥–Ω–∞–ª—ñ–≤
4.2.2 backend/app.py - Flask –¥–æ–¥–∞—Ç–æ–∫
python# –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏:
- /health                   # Health check
- /webhook/cryptobot        # CryptoBot webhook
- /api/tasks/pending        # –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å
- /api/tasks/<id>/status    # –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É
- /api/stats/admin          # –ê–¥–º—ñ–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- /api/bot/status          # –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞
4.2.3 backend/bot/main.py - –Ø–¥—Ä–æ –±–æ—Ç–∞
python# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:
- get_bot()                 # Singleton –¥–ª—è Bot
- get_dispatcher()          # Singleton –¥–ª—è Dispatcher
- get_storage()            # Redis/Memory storage
- register_handlers()       # –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è handlers
- setup_bot()              # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è

5. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏
5.1 Bot Handlers (–û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥)
5.1.1 Start Handler (handlers/start.py)
–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:

–û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥–∏ /start
–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é
–ü–æ–∫–∞–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

–û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
python@router.message(CommandStart())
async def cmd_start(message: Message, state: FSMContext)
    # –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    # –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é

@router.callback_query(F.data == "my_stats")
async def show_user_stats(callback: CallbackQuery, state: FSMContext)
    # –ü–æ–∫–∞–∑ –¥–µ—Ç–∞–ª—å–Ω–æ—ó —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

@router.callback_query(F.data == "support")
async def show_support(callback: CallbackQuery, state: FSMContext)
    # –ú–µ–Ω—é –ø—ñ–¥—Ç—Ä–∏–º–∫–∏
5.1.2 Packages Handler (handlers/packages.py)
–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:

–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤
–ü–æ–∫–∞–∑ –¥–µ—Ç–∞–ª–µ–π –ø–∞–∫–µ—Ç—É
–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
–û–±—Ä–æ–±–∫–∞ –æ–ø–ª–∞—Ç–∏

–û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
python@router.callback_query(F.data == "select_packages")
async def show_packages(callback: CallbackQuery, state: FSMContext)
    # –°–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç—ñ–≤

@router.callback_query(F.data.startswith("pkg_"))
async def show_package_details(callback: CallbackQuery, state: FSMContext)
    # –î–µ—Ç–∞–ª—ñ –ø–∞–∫–µ—Ç—É

@router.callback_query(F.data.startswith("confirm_"))
async def confirm_order(callback: CallbackQuery, state: FSMContext)
    # –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

@router.callback_query(F.data.startswith("pay_"))
async def process_payment(callback: CallbackQuery, state: FSMContext)
    # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–≤–æ–π—Å—É –¥–ª—è –æ–ø–ª–∞—Ç–∏
5.1.3 Orders Handler (handlers/orders.py)
–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:

–î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤ –¥–ª—è –Ω–∞–∫—Ä—É—Ç–∫–∏
–í–∏–±—ñ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏
–í–∞–ª—ñ–¥–∞—Ü—ñ—è URL
–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å

–û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
python@router.callback_query(F.data == "add_post")
async def start_add_post(callback: CallbackQuery, state: FSMContext)
    # –ü–æ—á–∞—Ç–æ–∫ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ—Å—Ç–∞

@router.callback_query(F.data.startswith("platform_"))
async def select_platform(callback: CallbackQuery, state: FSMContext)
    # –í–∏–±—ñ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏

@router.message(UserStates.WAITING_POST_URL)
async def process_post_url(message: Message, state: FSMContext)
    # –û–±—Ä–æ–±–∫–∞ URL –ø–æ—Å—Ç–∞
5.1.4 Admin Handler (handlers/admin.py)
–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:

–ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
–°–∏—Å—Ç–µ–º–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
–ú–∞—Å–æ–≤–∞ —Ä–æ–∑—Å–∏–ª–∫–∞
–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–∞–∫–µ—Ç–∞–º–∏

–û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
python@router.message(Command("admin"))
async def admin_panel(message: Message, state: FSMContext)
    # –ì–æ–ª–æ–≤–Ω–∞ –ø–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω–∞

@router.callback_query(F.data == "admin_stats")
async def show_admin_stats(callback: CallbackQuery, state: FSMContext)
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–∏

@router.callback_query(F.data == "admin_broadcast")
async def start_broadcast(callback: CallbackQuery, state: FSMContext)
    # –ü–æ—á–∞—Ç–æ–∫ —Ä–æ–∑—Å–∏–ª–∫–∏

async def notify_admins_new_order(bot, user_data, order_data)
    # –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –Ω–æ–≤–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
5.2 Services (–°–µ—Ä–≤—ñ—Å–∏)
5.2.1 UserService
–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
pythonclass UserService:
    @staticmethod
    async def get_or_create_user(telegram_id, username, first_name, last_name)
        # –°—Ç–≤–æ—Ä—é—î –∞–±–æ –æ—Ç—Ä–∏–º—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
        
    @staticmethod
    async def get_user_stats_fresh(telegram_id)
        # –û—Ç—Ä–∏–º—É—î –∞–∫—Ç—É–∞–ª—å–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        
    @staticmethod
    async def invalidate_cache(telegram_id)
        # –û—á–∏—â–∞—î –∫–µ—à –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
5.2.2 OrderService
–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –†–æ–±–æ—Ç–∞ –∑ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏
pythonclass OrderService:
    @staticmethod
    async def get_packages()
        # –û—Ç—Ä–∏–º—É—î —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç—ñ–≤
        
    @staticmethod
    async def create_new_order(telegram_id, package_slug)
        # –°—Ç–≤–æ—Ä—é—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
        
    @staticmethod
    async def activate_user_order(order_id)
        # –ê–∫—Ç–∏–≤—É—î –æ–ø–ª–∞—á–µ–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
        
    @staticmethod
    async def get_package_by_slug(slug)
        # –ó–Ω–∞—Ö–æ–¥–∏—Ç—å –ø–∞–∫–µ—Ç –∑–∞ slug
5.2.3 PaymentService
–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ CryptoBot
pythonclass PaymentService:
    @staticmethod
    async def create_invoice(order_id, amount, currency, description)
        # –°—Ç–≤–æ—Ä—é—î —Ä–∞—Ö—É–Ω–æ–∫ –¥–ª—è –æ–ø–ª–∞—Ç–∏
        
    @staticmethod
    async def verify_webhook(body, signature)
        # –ü–µ—Ä–µ–≤—ñ—Ä—è—î –ø—ñ–¥–ø–∏—Å webhook
        
    @staticmethod
    async def process_payment_webhook(webhook_data)
        # –û–±—Ä–æ–±–ª—è—î webhook –ø—Ä–æ –æ–ø–ª–∞—Ç—É
5.2.4 ExternalService
–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –í–∑–∞—î–º–æ–¥—ñ—è –∑ Main Bot
pythonclass ExternalService:
    @staticmethod
    async def add_post_for_processing(telegram_id, post_url, platform)
        # –î–æ–¥–∞—î –ø–æ—Å—Ç –¥–ª—è –æ–±—Ä–æ–±–∫–∏
        
    @staticmethod
    async def send_pending_tasks(limit)
        # –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–∞–≤–¥–∞–Ω–Ω—è Main Bot
        
    @staticmethod
    async def check_main_bot_health()
        # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ Main Bot

6. API Reference
6.1 REST API Endpoints
6.1.1 Health Check
GET /health
–ü–µ—Ä–µ–≤—ñ—Ä—è—î —Å—Ç–∞–Ω —Å–∏—Å—Ç–µ–º–∏.
Response:
json{
    "status": "healthy",
    "checks": {
        "database": true,
        "redis": true,
        "thread_pool": true,
        "service": "interface-bot"
    }
}
6.1.2 CryptoBot Webhook
POST /webhook/cryptobot
–û–±—Ä–æ–±–ª—è—î webhook –≤—ñ–¥ CryptoBot –ø—Ä–æ –æ–ø–ª–∞—Ç—É.
Headers:
Crypto-Pay-API-Signature: <signature>
Content-Type: application/json
Request Body:
json{
    "update_type": "invoice_paid",
    "payload": {
        "invoice_id": "123",
        "status": "paid",
        "amount": "99.99",
        "asset": "USDT",
        "payload": "user123_starter-mini_456"
    }
}
6.1.3 Get Pending Tasks
GET /api/tasks/pending?limit=10
–û—Ç—Ä–∏–º—É—î –∑–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ (–¥–ª—è Main Bot).
Headers:
Authorization: Bearer <api_key>
Response:
json{
    "success": true,
    "tasks_sent": [
        {
            "task_id": "uuid",
            "post_data": {
                "url": "https://t.me/channel/123",
                "platform": "telegram"
            },
            "user_data": {
                "telegram_id": "123456789",
                "username": "user123"
            },
            "package_data": {
                "name": "Starter Mini",
                "features": {}
            }
        }
    ]
}
6.1.4 Update Task Status
PUT /api/tasks/<task_id>/status
–û–Ω–æ–≤–ª—é—î —Å—Ç–∞—Ç—É—Å –∑–∞–≤–¥–∞–Ω–Ω—è.
Headers:
Authorization: Bearer <api_key>
Content-Type: application/json
Request Body:
json{
    "status": "completed",
    "external_task_id": "main_bot_task_123",
    "response_data": {
        "views_added": 1500,
        "reactions_added": 20
    }
}
6.1.5 Admin Statistics
GET /api/stats/admin
–û—Ç—Ä–∏–º—É—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤.
Headers:
Authorization: Bearer <api_key>
Response:
json{
    "total_users": 150,
    "active_users": 45,
    "total_orders": 320,
    "paid_orders": 280,
    "total_revenue": 15000.00,
    "total_posts": 1250,
    "active_posts": 23,
    "completed_posts": 1200,
    "packages_count": 3,
    "recent_orders": []
}
6.2 Telegram Bot Commands
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ –∫–æ–º–∞–Ω–¥–∏:

/start - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ —Ç–∞ –≥–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é
/help - –î–æ–ø–æ–º–æ–≥–∞ (–æ–ø—Ü—ñ–π–Ω–æ)

–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:

/admin - –í—ñ–¥–∫—Ä–∏—Ç–∏ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
/stats - –®–≤–∏–¥–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/broadcast - –†–æ–∑—Å–∏–ª–∫–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

6.3 Callback Data Structure
python# –ü–∞–∫–µ—Ç–∏
"select_packages"           # –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–∞–∫–µ—Ç–∏
"pkg_{slug}"               # –î–µ—Ç–∞–ª—ñ –ø–∞–∫–µ—Ç—É
"confirm_{slug}"           # –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
"pay_{order_id}"           # –û–ø–ª–∞—Ç–∏—Ç–∏
"cancel_{order_id}"        # –°–∫–∞—Å—É–≤–∞—Ç–∏

# –ü–æ—Å—Ç–∏
"add_post"                 # –î–æ–¥–∞—Ç–∏ –ø–æ—Å—Ç
"platform_{name}"          # –í–∏–±—Ä–∞—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
"cancel_action"            # –°–∫–∞—Å—É–≤–∞—Ç–∏ –¥—ñ—é

# –ù–∞–≤—ñ–≥–∞—Ü—ñ—è
"back_to_menu"             # –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é
"my_stats"                 # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
"support"                  # –ü—ñ–¥—Ç—Ä–∏–º–∫–∞
"show_faq"                 # FAQ

# –ê–¥–º—ñ–Ω
"admin_stats"              # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–∏
"admin_packages"           # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–∞–∫–µ—Ç–∞–º–∏
"admin_broadcast"          # –†–æ–∑—Å–∏–ª–∫–∞
"admin_settings"           # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

7. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
7.1 –°—Ö–µ–º–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
7.1.1 –¢–∞–±–ª–∏—Ü—è users
–ö–æ–ª–æ–Ω–∫–∞–¢–∏–ø–û–ø–∏—ÅidUUIDPrimary keytelegram_idVARCHAR(50)Telegram ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞usernameVARCHAR(100)Username –≤ Telegramfirst_nameVARCHAR(100)–Ü–º'—èlast_nameVARCHAR(100)–ü—Ä—ñ–∑–≤–∏—â–µbalanceDECIMAL(10,2)–ë–∞–ª–∞–Ω—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞created_atTIMESTAMP–î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—óupdated_atTIMESTAMP–î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
7.1.2 –¢–∞–±–ª–∏—Ü—è packages
–ö–æ–ª–æ–Ω–∫–∞–¢–∏–ø–û–ø–∏—ÅidUUIDPrimary keyslugVARCHAR(50)–£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—ÄnameVARCHAR(100)–ù–∞–∑–≤–∞ –ø–∞–∫–µ—Ç—ÉdescriptionTEXT–û–ø–∏—ÅpriceDECIMAL(10,2)–¶—ñ–Ω–∞currencyVARCHAR(10)–í–∞–ª—é—Ç–∞posts_per_dayINTEGER–ü–æ—Å—Ç—ñ–≤ –Ω–∞ –¥–µ–Ω—åviews_rangeVARCHAR(50)–î—ñ–∞–ø–∞–∑–æ–Ω –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤reactions_rangeVARCHAR(50)–î—ñ–∞–ø–∞–∑–æ–Ω —Ä–µ–∞–∫—Ü—ñ–πcomments_rangeVARCHAR(50)–î—ñ–∞–ø–∞–∑–æ–Ω –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤reposts_rangeVARCHAR(50)–î—ñ–∞–ø–∞–∑–æ–Ω —Ä–µ–ø–æ—Å—Ç—ñ–≤featuresJSONB–î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ócategoryVARCHAR(50)–ö–∞—Ç–µ–≥–æ—Ä—ñ—èis_activeBOOLEAN–°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
7.1.3 –¢–∞–±–ª–∏—Ü—è orders
–ö–æ–ª–æ–Ω–∫–∞–¢–∏–ø–û–ø–∏—ÅidUUIDPrimary keyuser_idUUIDFK to userspackage_idUUIDFK to packagesamountDECIMAL(10,2)–°—É–º–∞currencyVARCHAR(10)–í–∞–ª—é—Ç–∞statusVARCHAR(50)–°—Ç–∞—Ç—É—Å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—èpayment_methodVARCHAR(50)–ú–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç–∏payment_dataJSONB–î–∞–Ω—ñ –ø–ª–∞—Ç–µ–∂—Éactivated_atTIMESTAMP–î–∞—Ç–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—óexpires_atTIMESTAMP–î–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—ècreated_atTIMESTAMP–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
7.1.4 –¢–∞–±–ª–∏—Ü—è posts
–ö–æ–ª–æ–Ω–∫–∞–¢–∏–ø–û–ø–∏—ÅidUUIDPrimary keyuser_idUUIDFK to usersorder_idUUIDFK to ordersurlTEXTURL –ø–æ—Å—Ç–∞platformVARCHAR(50)–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞statusVARCHAR(50)–°—Ç–∞—Ç—É—ÅmetadataJSONB–ú–µ—Ç–∞–¥–∞–Ω—ñcreated_atTIMESTAMP–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—èprocessed_atTIMESTAMP–î–∞—Ç–∞ –æ–±—Ä–æ–±–∫–∏
7.1.5 –¢–∞–±–ª–∏—Ü—è tasks
–ö–æ–ª–æ–Ω–∫–∞–¢–∏–ø–û–ø–∏—ÅidUUIDPrimary keypost_idUUIDFK to postsstatusVARCHAR(50)–°—Ç–∞—Ç—É—Å –∑–∞–≤–¥–∞–Ω–Ω—èexternal_task_idVARCHAR(100)ID –≤ Main Botrequest_dataJSONB–î–∞–Ω—ñ –∑–∞–ø–∏—Ç—Éresponse_dataJSONB–î–∞–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñattemptsINTEGER–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–±created_atTIMESTAMP–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—èsent_atTIMESTAMP–î–∞—Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏completed_atTIMESTAMP–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
7.2 –°—Ç–∞—Ç—É—Å–∏ —Ç–∞ enum –∑–Ω–∞—á–µ–Ω–Ω—è
Order Status:

pending - –û—á—ñ–∫—É—î –æ–ø–ª–∞—Ç–∏
paid - –û–ø–ª–∞—á–µ–Ω–æ
processing - –í –æ–±—Ä–æ–±—Ü—ñ
completed - –í–∏–∫–æ–Ω–∞–Ω–æ
failed - –ü–æ–º–∏–ª–∫–∞
cancelled - –°–∫–∞—Å–æ–≤–∞–Ω–æ
refunded - –ü–æ–≤–µ—Ä–Ω–µ–Ω–æ –∫–æ—à—Ç–∏

Post Status:

pending - –û—á—ñ–∫—É—î –æ–±—Ä–æ–±–∫–∏
processing - –û–±—Ä–æ–±–ª—è—î—Ç—å—Å—è
completed - –í–∏–∫–æ–Ω–∞–Ω–æ
failed - –ü–æ–º–∏–ª–∫–∞
cancelled - –°–∫–∞—Å–æ–≤–∞–Ω–æ

Task Status:

created - –°—Ç–≤–æ—Ä–µ–Ω–æ
sent - –í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ Main Bot
processing - –û–±—Ä–æ–±–ª—è—î—Ç—å—Å—è
completed - –í–∏–∫–æ–Ω–∞–Ω–æ
failed - –ü–æ–º–∏–ª–∫–∞
cancelled - –°–∫–∞—Å–æ–≤–∞–Ω–æ


8. Telegram Bot
8.1 FSM States (Finite State Machine)
UserStates:
pythonMAIN_MENU              # –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é
SELECTING_PACKAGE      # –í–∏–±—ñ—Ä –ø–∞–∫–µ—Ç—É
VIEWING_PACKAGE_DETAILS # –ü–µ—Ä–µ–≥–ª—è–¥ –¥–µ—Ç–∞–ª–µ–π
CONFIRMING_ORDER       # –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
WAITING_PAYMENT        # –û—á—ñ–∫—É–≤–∞–Ω–Ω—è –æ–ø–ª–∞—Ç–∏
SELECTING_PLATFORM     # –í–∏–±—ñ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏
WAITING_POST_URL       # –û—á—ñ–∫—É–≤–∞–Ω–Ω—è URL
PROCESSING_POST        # –û–±—Ä–æ–±–∫–∞ –ø–æ—Å—Ç–∞
AdminStates:
pythonMAIN_PANEL            # –ì–æ–ª–æ–≤–Ω–∞ –ø–∞–Ω–µ–ª—å
VIEWING_STATS         # –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
BROADCAST_COMPOSE     # –°–∫–ª–∞–¥–∞–Ω–Ω—è —Ä–æ–∑—Å–∏–ª–∫–∏
BROADCAST_CONFIRM     # –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Ä–æ–∑—Å–∏–ª–∫–∏
SETTINGS_MENU         # –ú–µ–Ω—é –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
PACKAGE_MANAGEMENT    # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–∞–∫–µ—Ç–∞–º–∏
8.2 Inline Keyboards
–ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é:
üì¶ –í–∏–±—Ä–∞—Ç–∏ –ø–∞–∫–µ—Ç
üîó –î–æ–¥–∞—Ç–∏ –ø–æ—Å—Ç
üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚öôÔ∏è –ü—ñ–¥—Ç—Ä–∏–º–∫–∞
–ú–µ–Ω—é –ø–∞–∫–µ—Ç—ñ–≤:
‚îÅ‚îÅ‚îÅ ‚≠ê STARTER ‚îÅ‚îÅ‚îÅ
ü•â Starter Mini - $99
‚îÅ‚îÅ‚îÅ üî• PROFESSIONAL ‚îÅ‚îÅ‚îÅ
ü•à Pro Advanced - $299
‚îÅ‚îÅ‚îÅ üöÄ ENTERPRISE ‚îÅ‚îÅ‚îÅ
ü•á Enterprise Elite - $999
¬´ –ù–∞–∑–∞–¥ –¥–æ –º–µ–Ω—é
–ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å:
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–∏
üì¶ –ö–µ—Ä—É–≤–∞–Ω–Ω—è –ø–∞–∫–µ—Ç–∞–º–∏
üîî –†–æ–∑—Å–∏–ª–∫–∞
‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
8.3 –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º
Welcome Message:
üöÄ –í—ñ—Ç–∞—î–º–æ –≤ SocialBoost Bot!

–û–±–µ—Ä—ñ—Ç—å –ø–∞–∫–µ—Ç –¥–ª—è —Ä–æ–∑–∫—Ä—É—Ç–∫–∏ –≤–∞—à–∏—Ö –ø–æ—Å—Ç—ñ–≤:
Payment Success:
‚úÖ –û–ø–ª–∞—Ç–∞ —É—Å–ø—ñ—à–Ω–∞!

–í–∞—à –ø–∞–∫–µ—Ç –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ.
Post Added:
‚úÖ –ü–æ—Å—Ç —É—Å–ø—ñ—à–Ω–æ –¥–æ–¥–∞–Ω–æ!

üîó URL: {url}
‚öôÔ∏è –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: {platform}

üöÄ –ù–∞–∫—Ä—É—Ç–∫–∞ —Ä–æ–∑–ø–æ—á–Ω–µ—Ç—å—Å—è –Ω–µ–∑–∞–±–∞—Ä–æ–º!

9. –°–∏—Å—Ç–µ–º–∏ –ø–ª–∞—Ç–µ–∂—ñ–≤
9.1 CryptoBot Integration
9.1.1 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–≤–æ–π—Å—É
python# PaymentService.create_invoice()
payload = {
    "asset": "USDT",
    "amount": "99.99",
    "description": "SocialBoost - Starter Mini",
    "payload": "user123_starter-mini_456",
    "expires_in": 3600
}
9.1.2 –û–±—Ä–æ–±–∫–∞ webhook

–û—Ç—Ä–∏–º–∞–Ω–Ω—è POST –∑–∞–ø–∏—Ç—É –Ω–∞ /webhook/cryptobot
–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–ø–∏—Å—É (HMAC-SHA256)
–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–∏—Ö –ø–ª–∞—Ç–µ–∂—É
–ê–∫—Ç–∏–≤–∞—Ü—ñ—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤ –ë–î
–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ–≤

9.1.3 –ë–µ–∑–ø–µ–∫–∞ –ø–ª–∞—Ç–µ–∂—ñ–≤

–ü—ñ–¥–ø–∏—Å webhook: HMAC-SHA256 –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
–£–Ω—ñ–∫–∞–ª—å–Ω—ñ payload: –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç–∞–º
–¢–∞–π–º–∞—É—Ç–∏: 1 –≥–æ–¥–∏–Ω–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
–õ–æ–≥—É–≤–∞–Ω–Ω—è: –í—Å—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –ª–æ–≥—É—é—Ç—å—Å—è

9.2 –ü–æ—Ç—ñ–∫ –æ–ø–ª–∞—Ç–∏
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–±–∏—Ä–∞—î –ø–∞–∫–µ—Ç
2. –°–∏—Å—Ç–µ–º–∞ —Å—Ç–≤–æ—Ä—é—î order –≤ –ë–î (status: pending)
3. –ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è CryptoBot invoice
4. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º—É—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –æ–ø–ª–∞—Ç—É
5. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ–ø–ª–∞—á—É—î –≤ CryptoBot
6. CryptoBot –Ω–∞–¥—Å–∏–ª–∞—î webhook
7. –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –ø—ñ–¥–ø–∏—Å
8. Order –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è (status: paid)
9. –ü–∞–∫–µ—Ç –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è (expires_at = +30 –¥–Ω—ñ–≤)
10. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º—É—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è

10. –ö–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
10.1 Redis Cache Strategy
10.1.1 –©–æ –∫–µ—à—É—î—Ç—å—Å—è:
–ö–ª—é—áTTL–û–ø–∏—Åuser_stats:{telegram_id}5 —Ö–≤–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞packages10 —Ö–≤–°–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç—ñ–≤health_check10 —Å–µ–∫Health check —Ä–µ–∑—É–ª—å—Ç–∞—Ç
10.1.2 Cache Invalidation:
–ö–µ—à –æ—á–∏—â–∞—î—Ç—å—Å—è –ø—Ä–∏:

–û–ø–ª–∞—Ç—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
–î–æ–¥–∞–≤–∞–Ω–Ω—ñ –ø–æ—Å—Ç–∞
–û–Ω–æ–≤–ª–µ–Ω–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—é
–ê–¥–º—ñ–Ω –¥—ñ—è—Ö

10.2 –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
10.2.1 Database:

–Ü–Ω–¥–µ–∫—Å–∏ –Ω–∞ —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ –∫–æ–ª–æ–Ω–∫–∏
Stored procedures –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
Connection pooling —á–µ—Ä–µ–∑ Supabase
JSONB –¥–ª—è –≥–Ω—É—á–∫–∏—Ö –¥–∞–Ω–∏—Ö

10.2.2 Bot:

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞ (aiogram 3.x)
Thread pool –¥–ª—è Flask integration
Batch processing –¥–ª—è –∑–∞–≤–¥–∞–Ω—å
Rate limiting –¥–ª—è API

10.2.3 API:

Pagination –¥–ª—è —Å–ø–∏—Å–∫—ñ–≤
Selective field returns
Compression –¥–ª—è responses
Request timeouts

10.3 –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è
Horizontal Scaling:
Load Balancer
     ‚îÇ
     ‚îú‚îÄ‚îÄ Bot Instance 1
     ‚îú‚îÄ‚îÄ Bot Instance 2
     ‚îî‚îÄ‚îÄ Bot Instance N
           ‚îÇ
     Shared Redis
           ‚îÇ
     Shared Database
Vertical Scaling:

–ó–±—ñ–ª—å—à–µ–Ω–Ω—è RAM –¥–ª—è –∫–µ—à—É
–ë—ñ–ª—å—à–µ CPU cores –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏
SSD –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ I/O


11. –ë–µ–∑–ø–µ–∫–∞
11.1 –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
11.1.1 Telegram Bot:

–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ telegram_id
Whitelist –∞–¥–º—ñ–Ω ID
FSM states –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É

11.1.2 API:

Bearer token –¥–ª—è Main Bot API
IP whitelist (–æ–ø—Ü—ñ–π–Ω–æ)
Rate limiting

11.1.3 Webhooks:

HMAC signature validation
HTTPS only
Request body size limits

11.2 –ó–∞—Ö–∏—Å—Ç –¥–∞–Ω–∏—Ö
11.2.1 Sensitive Data:

–ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –¥–ª—è —Å–µ–∫—Ä–µ—Ç—ñ–≤
–ù–µ –ª–æ–≥—É–≤–∞—Ç–∏ —Ç–æ–∫–µ–Ω–∏/–ø–∞—Ä–æ–ª—ñ
–®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è payment data

11.2.2 SQL Injection:

–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏
Stored procedures
Input validation

11.2.3 XSS Prevention:

HTML escaping –≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö
–°–∞–Ω—ñ—Ç–∏–∑–∞—Ü—ñ—è user input
Content-Type headers

11.3 Rate Limiting
python# –ü—Ä–∏–∫–ª–∞–¥ rate limiting
RATE_LIMITS = {
    'add_post': '10/hour',
    'api_calls': '100/minute',
    'webhook': '1000/hour'
}
11.4 Monitoring
11.4.1 –©–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏:

Failed payments
API errors
Database connectivity
High latency requests
Unusual user activity

11.4.2 Alerts:

Telegram –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∞–¥–º—ñ–Ω–∞–º
Error logs
Metrics dashboard (–æ–ø—Ü—ñ–π–Ω–æ)


12. Deployment
12.1 Docker Deployment
12.1.1 Dockerfile:
dockerfileFROM python:3.11-slim

# –°–∏—Å—Ç–µ–º–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
RUN apt-get update && apt-get install -y \
    gcc g++ libpq-dev \
    && rm -rf /var/lib/apt/lists/*

# –†–æ–±–æ—á–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è
WORKDIR /app

# –ö–æ–ø—ñ—é—î–º–æ requirements
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø—ñ—é—î–º–æ –∫–æ–¥
COPY . .

# –°—Ç–≤–æ—Ä—é—î–º–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –¥–ª—è –ª–æ–≥—ñ–≤
RUN mkdir -p logs

# –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
ENV PYTHONPATH=/app
ENV PYTHONUNBUFFERED=1

# –ü–æ—Ä—Ç
EXPOSE 8000

# –ó–∞–ø—É—Å–∫
CMD ["python", "main.py"]
12.1.2 docker-compose.yml:
yamlversion: '3.8'

services:
  bot:
    build: .
    container_name: socialboost-bot
    env_file: .env
    ports:
      - "8000:8000"
    volumes:
      - ./logs:/app/logs
    depends_on:
      - redis
    restart: unless-stopped

  redis:
    image: redis:7-alpine
    container_name: socialboost-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    restart: unless-stopped

volumes:
  redis_data:
12.1.3 –ó–∞–ø—É—Å–∫ –∑ Docker:
bash# Build
docker-compose build

# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –õ–æ–≥–∏
docker-compose logs -f bot

# –ó—É–ø–∏–Ω–∫–∞
docker-compose down
12.2 VPS Deployment
12.2.1 –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:
bash# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
sudo apt update && sudo apt upgrade -y

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Python 3.11
sudo apt install python3.11 python3.11-venv python3-pip

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Redis
sudo apt install redis-server

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è nginx (–¥–ª—è webhook)
sudo apt install nginx

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è supervisor (process manager)
sudo apt install supervisor
12.2.2 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É:
bash# –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è
cd /opt
sudo git clone https://github.com/your-repo/socialboost-bot.git
cd socialboost-bot

# –í—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
python3.11 -m venv venv
source venv/bin/activate

# –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r requirements.txt

# –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
cp .env.example .env
nano .env  # –í—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏
12.2.3 Supervisor config:
ini# /etc/supervisor/conf.d/socialboost.conf
[program:socialboost]
command=/opt/socialboost-bot/venv/bin/python /opt/socialboost-bot/main.py
directory=/opt/socialboost-bot
user=www-data
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/opt/socialboost-bot/logs/supervisor.log
environment=PATH="/opt/socialboost-bot/venv/bin"
12.2.4 Nginx config (–¥–ª—è webhook):
nginx# /etc/nginx/sites-available/socialboost
server {
    listen 80;
    server_name your-domain.com;

    location /webhook/ {
        proxy_pass http://127.0.0.1:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /health {
        proxy_pass http://127.0.0.1:8000;
    }
}
12.3 Systemd Service (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
ini# /etc/systemd/system/socialboost.service
[Unit]
Description=SocialBoost Bot
After=network.target redis.service
Wants=redis.service

[Service]
Type=simple
User=www-data
WorkingDirectory=/opt/socialboost-bot
Environment="PATH=/opt/socialboost-bot/venv/bin"
ExecStart=/opt/socialboost-bot/venv/bin/python /opt/socialboost-bot/main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
–ö–æ–º–∞–Ω–¥–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è:
bash# –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è systemd
sudo systemctl daemon-reload

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—É
sudo systemctl start socialboost

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable socialboost

# –°—Ç–∞—Ç—É—Å
sudo systemctl status socialboost

# –õ–æ–≥–∏
sudo journalctl -u socialboost -f
12.4 Production Checklist
12.4.1 –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º:

 –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω—ñ
 .env –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è production
 DEBUG=False
 –°–µ–∫—Ä–µ—Ç–Ω—ñ –∫–ª—é—á—ñ –∑–º—ñ–Ω–µ–Ω—ñ
 –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö backed up
 SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π
 –î–æ–º–µ–Ω –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π
 Webhook URL –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π

12.4.2 –ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é:

 Health check –ø—Ä–∞—Ü—é—î
 Bot –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ /start
 –ü–ª–∞—Ç–µ–∂—ñ –ø—Ä–æ—Ö–æ–¥—è—Ç—å
 –õ–æ–≥–∏ –ø–∏—à—É—Ç—å—Å—è
 –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π
 Backup strategy –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

12.5 CI/CD Pipeline (GitHub Actions)
yaml# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.11'
      - name: Install dependencies
        run: |
          pip install -r requirements.txt
          pip install pytest
      - name: Run tests
        run: pytest

  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to VPS
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.VPS_HOST }}
          username: ${{ secrets.VPS_USER }}
          key: ${{ secrets.VPS_SSH_KEY }}
          script: |
            cd /opt/socialboost-bot
            git pull origin main
            source venv/bin/activate
            pip install -r requirements.txt
            sudo systemctl restart socialboost

13. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è
13.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥—ñ–≤
13.1.1 Log Files:
–§–∞–π–ª–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è–†–æ—Ç–∞—Ü—ñ—èlogs/bot.log–û—Å–Ω–æ–≤–Ω—ñ –ª–æ–≥–∏10MB, 5 —Ñ–∞–π–ª—ñ–≤logs/errors.log–ü–æ–º–∏–ª–∫–∏10MB, 5 —Ñ–∞–π–ª—ñ–≤logs/payments.log–ü–ª–∞—Ç–µ–∂—ñ50MB, 10 —Ñ–∞–π–ª—ñ–≤logs/admin.log–ê–¥–º—ñ–Ω –¥—ñ—ó10MB, 5 —Ñ–∞–π–ª—ñ–≤
13.1.2 Log Format:
json{
    "timestamp": "2024-01-15T10:30:45.123Z",
    "level": "INFO",
    "logger": "backend.bot.handlers.start",
    "event": "user_started_bot",
    "user_id": "123456789",
    "username": "user123",
    "extra": {
        "command": "/start",
        "chat_type": "private"
    }
}
13.2 –ú–µ—Ç—Ä–∏–∫–∏
13.2.1 Business Metrics:
pythonMETRICS = {
    'users': {
        'total': 'SELECT COUNT(*) FROM users',
        'active_daily': 'SELECT COUNT(DISTINCT user_id) FROM posts WHERE DATE(created_at) = CURRENT_DATE',
        'new_today': 'SELECT COUNT(*) FROM users WHERE DATE(created_at) = CURRENT_DATE'
    },
    'orders': {
        'total': 'SELECT COUNT(*) FROM orders',
        'revenue': 'SELECT SUM(amount) FROM orders WHERE status = "paid"',
        'conversion_rate': 'paid_orders / total_orders * 100'
    },
    'posts': {
        'total': 'SELECT COUNT(*) FROM posts',
        'processing': 'SELECT COUNT(*) FROM posts WHERE status = "processing"',
        'success_rate': 'completed_posts / total_posts * 100'
    }
}
13.2.2 System Metrics:
pythonSYSTEM_METRICS = {
    'response_time': 'Average API response time',
    'error_rate': 'Errors per minute',
    'cache_hit_rate': 'Cache hits / total requests',
    'db_connections': 'Active database connections',
    'memory_usage': 'RAM usage in MB',
    'cpu_usage': 'CPU usage percentage'
}
13.3 Alerting
13.3.1 Critical Alerts:
AlertConditionActionDatabase DownConnection failedSMS + TelegramPayment FailedCryptoBot errorEmail + LogHigh Error Rate>10 errors/minTelegramLow Disk Space<1GB freeEmailService DownHealth check failAll channels
13.3.2 Alert Implementation:
python# backend/utils/alerting.py
class AlertManager:
    @staticmethod
    async def send_critical_alert(alert_type, message):
        # Telegram to admins
        for admin_id in config.ADMIN_TELEGRAM_IDS:
            await bot.send_message(
                admin_id,
                f"üö® CRITICAL: {alert_type}\n\n{message}"
            )
        
        # Log to file
        logger.critical(f"Alert: {alert_type}", message=message)
        
        # Email (if configured)
        if config.ALERT_EMAIL:
            send_email(config.ALERT_EMAIL, alert_type, message)
13.4 Dashboard (–æ–ø—Ü—ñ–π–Ω–æ)
13.4.1 Grafana + Prometheus:
yaml# docker-compose.monitoring.yml
version: '3.8'

services:
  prometheus:
    image: prom/prometheus
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    ports:
      - "9090:9090"

  grafana:
    image: grafana/grafana
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
13.4.2 Custom Dashboard:
python# backend/api/dashboard.py
@app.route('/api/dashboard/stats')
def dashboard_stats():
    return jsonify({
        'users': get_user_metrics(),
        'orders': get_order_metrics(),
        'posts': get_post_metrics(),
        'system': get_system_metrics(),
        'charts': {
            'daily_users': get_daily_users_chart(),
            'revenue': get_revenue_chart(),
            'posts_by_platform': get_platform_chart()
        }
    })

14. Troubleshooting
14.1 –ß–∞—Å—Ç—ñ –ø—Ä–æ–±–ª–µ–º–∏
14.1.1 Bot –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î
–°–∏–º–ø—Ç–æ–º–∏:

–ö–æ–º–∞–Ω–¥–∞ /start –Ω–µ –ø—Ä–∞—Ü—é—î
–ù–µ–º–∞—î —Ä–µ–∞–∫—Ü—ñ—ó –Ω–∞ –∫–Ω–æ–ø–∫–∏

–†—ñ—à–µ–Ω–Ω—è:
bash# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–æ–∫–µ–Ω
echo $TELEGRAM_BOT_TOKEN

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏
tail -f logs/bot.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞
sudo systemctl restart socialboost

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ webhook (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è)
curl https://api.telegram.org/bot<TOKEN>/getWebhookInfo
14.1.2 –ü–ª–∞—Ç–µ–∂—ñ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç—å
–°–∏–º–ø—Ç–æ–º–∏:

Invoice –Ω–µ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è
Webhook –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å

–†—ñ—à–µ–Ω–Ω—è:
bash# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ CryptoBot —Ç–æ–∫–µ–Ω
curl -X POST https://pay.crypt.bot/api/getMe \
  -H "Crypto-Pay-API-Token: $CRYPTOBOT_TOKEN"

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ webhook URL
curl -X POST https://your-domain.com/webhook/cryptobot \
  -H "Content-Type: application/json" \
  -d '{"test": true}'

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏
grep "payment" logs/bot.log
14.1.3 Database connection failed
–°–∏–º–ø—Ç–æ–º–∏:

Health check fails
Cannot create users

–†—ñ—à–µ–Ω–Ω—è:
bash# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Supabase credentials
curl "$SUPABASE_URL/rest/v1/" \
  -H "apikey: $SUPABASE_KEY"

# –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü—ñ—ó
curl "$SUPABASE_URL/rest/v1/rpc/get_available_packages" \
  -H "apikey: $SUPABASE_KEY"

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –º–µ—Ä–µ–∂—É
ping your-project.supabase.co
14.1.4 Redis connection error
–°–∏–º–ø—Ç–æ–º–∏:

FSM states –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å
–ö–µ—à –Ω–µ –ø—Ä–∞—Ü—é—î

–†—ñ—à–µ–Ω–Ω—è:
bash# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Redis
redis-cli ping

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑'—î–¥–Ω–∞–Ω–Ω—è
redis-cli -u $REDIS_URL ping

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Redis
sudo systemctl restart redis
14.2 Debug Mode
14.2.1 –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è debug:
env# .env
FLASK_ENV=development
LOG_LEVEL=DEBUG
14.2.2 Debug commands:
python# –î–æ–¥–∞–π—Ç–µ –≤ admin.py –¥–ª—è debug
@router.message(Command("debug"))
async def debug_info(message: Message):
    if not is_admin(message.from_user.id):
        return
    
    info = {
        'bot_initialized': is_bot_initialized(),
        'redis_connected': cache.exists('test'),
        'db_connected': db.health_check(),
        'tasks_pending': len(get_pending_tasks()),
        'cache_keys': cache.keys('*')
    }
    
    await message.answer(f"Debug:\n{json.dumps(info, indent=2)}")
14.3 Performance Issues
14.3.1 –ü–æ–≤—ñ–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –±–æ—Ç–∞:
–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:
python# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–µ—à
@cache_result(ttl=300)
async def get_expensive_data():
    return await db.complex_query()

# Batch –æ–ø–µ—Ä–∞—Ü—ñ—ó
async def process_tasks_batch(tasks):
    async with aiohttp.ClientSession() as session:
        results = await asyncio.gather(*[
            process_single(session, task) 
            for task in tasks
        ])
    return results

# Lazy loading
async def get_user_data(user_id, fields=None):
    if fields:
        return await db.get_user_fields(user_id, fields)
    return await db.get_user(user_id)
14.3.2 Memory leaks:
–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
pythonimport tracemalloc
import gc

# –ü–æ—á–∞—Ç–æ–∫ —Ç—Ä–∞—Å—É–≤–∞–Ω–Ω—è
tracemalloc.start()

# Snapshot
snapshot = tracemalloc.take_snapshot()
top_stats = snapshot.statistics('lineno')

for stat in top_stats[:10]:
    print(stat)

# Garbage collection
gc.collect()
14.4 Recovery Procedures
14.4.1 Backup Recovery:
bash# Backup database
pg_dump $DATABASE_URL > backup_$(date +%Y%m%d).sql

# Restore database
psql $DATABASE_URL < backup_20240115.sql

# Backup Redis
redis-cli --rdb /backup/dump.rdb

# Restore Redis
sudo cp /backup/dump.rdb /var/lib/redis/dump.rdb
sudo systemctl restart redis
14.4.2 Emergency Rollback:
bash# Git rollback
git log --oneline -10
git checkout <previous-commit>

# Docker rollback
docker ps -a
docker run -d <previous-image-id>

# Database migration rollback
alembic downgrade -1

15. –î–æ–¥–∞—Ç–∫–∏
15.1 –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ
15.1.1 –¢–µ—Å—Ç–æ–≤—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:
sqlINSERT INTO users (telegram_id, username, first_name, balance) VALUES
('test_user_1', 'testuser1', 'Test', 100.00),
('test_user_2', 'testuser2', 'User', 50.00),
('test_admin', 'admin', 'Admin', 1000.00);
15.1.2 –¢–µ—Å—Ç–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞:
python# tests/test_bot_commands.py
async def test_start_command():
    bot = Bot(token=TEST_TOKEN)
    dp = Dispatcher()
    
    # –°–∏–º—É–ª—è—Ü—ñ—è /start
    message = Mock(spec=Message)
    message.from_user.id = 123456789
    message.from_user.username = "testuser"
    
    await cmd_start(message, FSMContext())
    
    assert message.answer.called
    assert "–í—ñ—Ç–∞—î–º–æ" in message.answer.call_args[0][0]
15.2 API Testing
15.2.1 Postman Collection:
json{
    "info": {
        "name": "SocialBoost API",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Health Check",
            "request": {
                "method": "GET",
                "url": "{{base_url}}/health"
            }
        },
        {
            "name": "Get Pending Tasks",
            "request": {
                "method": "GET",
                "url": "{{base_url}}/api/tasks/pending?limit=10",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{api_key}}"
                    }
                ]
            }
        }
    ]
}
15.2.2 cURL examples:
bash# Health check
curl http://localhost:8000/health

# –°–∏–º—É–ª—è—Ü—ñ—è webhook –ø–ª–∞—Ç–µ–∂—É
curl -X POST http://localhost:8000/webhook/cryptobot \
  -H "Content-Type: application/json" \
  -H "Crypto-Pay-API-Signature: test_signature" \
  -d '{
    "update_type": "invoice_paid",
    "payload": {
        "invoice_id": "test_123",
        "status": "paid",
        "amount": "99.99",
        "payload": "123456789_starter-mini_1"
    }
  }'
15.3 –ú—ñ–≥—Ä–∞—Ü—ñ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
15.3.1 –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó –∫–æ–ª–æ–Ω–∫–∏:
sql-- Migration: add_referral_system.sql
ALTER TABLE users ADD COLUMN referrer_id UUID REFERENCES users(id);
ALTER TABLE users ADD COLUMN referral_code VARCHAR(20) UNIQUE;
ALTER TABLE users ADD COLUMN referral_bonus DECIMAL(10,2) DEFAULT 0;

CREATE INDEX idx_users_referral_code ON users(referral_code);
CREATE INDEX idx_users_referrer_id ON users(referrer_id);
15.3.2 –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–π:
sql-- Update function for referral bonus
CREATE OR REPLACE FUNCTION add_referral_bonus(
    p_referrer_id UUID,
    p_amount DECIMAL
)
RETURNS BOOLEAN AS $
BEGIN
    UPDATE users 
    SET referral_bonus = referral_bonus + p_amount,
        balance = balance + p_amount
    WHERE id = p_referrer_id;
    
    RETURN FOUND;
END;
$ LANGUAGE plpgsql;
15.4 –ö–æ—Ä–∏—Å–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏
15.4.1 –û—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –ª–æ–≥—ñ–≤:
bash#!/bin/bash
# scripts/cleanup_logs.sh

LOG_DIR="/opt/socialboost-bot/logs"
DAYS_TO_KEEP=30

find $LOG_DIR -type f -name "*.log.*" -mtime +$DAYS_TO_KEEP -delete
echo "Cleaned logs older than $DAYS_TO_KEEP days"
15.4.2 Backup script:
bash#!/bin/bash
# scripts/backup.sh

BACKUP_DIR="/backup/socialboost"
DATE=$(date +%Y%m%d_%H%M%S)

# Database backup
pg_dump $DATABASE_URL > $BACKUP_DIR/db_$DATE.sql

# Redis backup
redis-cli --rdb $BACKUP_DIR/redis_$DATE.rdb

# Compress
tar -czf $BACKUP_DIR/backup_$DATE.tar.gz \
    $BACKUP_DIR/db_$DATE.sql \
    $BACKUP_DIR/redis_$DATE.rdb

# Clean old files
rm $BACKUP_DIR/db_$DATE.sql
rm $BACKUP_DIR/redis_$DATE.rdb

# Upload to S3 (optional)
# aws s3 cp $BACKUP_DIR/backup_$DATE.tar.gz s3://your-bucket/backups/

echo "Backup completed: backup_$DATE.tar.gz"
15.4.3 Monitoring script:
python#!/usr/bin/env python3
# scripts/monitor.py

import asyncio
import aiohttp
from datetime import datetime

async def check_health():
    async with aiohttp.ClientSession() as session:
        try:
            async with session.get('http://localhost:8000/health') as resp:
                data = await resp.json()
                if data['status'] != 'healthy':
                    print(f"[{datetime.now()}] WARNING: {data}")
                return data['status'] == 'healthy'
        except Exception as e:
            print(f"[{datetime.now()}] ERROR: {e}")
            return False

async def main():
    while True:
        is_healthy = await check_health()
        if not is_healthy:
            # Send alert
            print("ALERT: Service unhealthy!")
        await asyncio.sleep(60)  # Check every minute

if __name__ == "__main__":
    asyncio.run(main())
15.5 Roadmap
Phase 1 (Current):

 Basic bot functionality
 Payment integration
 Package system
 Admin panel
 Basic statistics

Phase 2 (Q2 2024):

 Referral system
 Multi-language support
 Advanced analytics
 A/B testing
 Email notifications

Phase 3 (Q3 2024):

 Mobile app
 API v2
 Machine learning for optimization
 Advanced fraud detection
 White-label solution

Phase 4 (Q4 2024):

 Blockchain integration
 NFT rewards
 DAO governance
 Cross-platform expansion
 Enterprise features


üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
–†–æ–∑—Ä–æ–±–∫–∞:

GitHub: github.com/your-repo/socialboost-bot
Issues: github.com/your-repo/socialboost-bot/issues

–ü—ñ–¥—Ç—Ä–∏–º–∫–∞:

Telegram: @your_support_bot
Email: support@socialboost.com

–õ—ñ—Ü–µ–Ω–∑—ñ—è:
MIT License - –¥–∏–≤. —Ñ–∞–π–ª LICENSE

üìù Changelog
Version 1.0.0 (2024-01-15)

Initial release
Basic bot functionality
CryptoBot payment integration
Admin panel
Redis caching
PostgreSQL/Supabase integration

Version 1.0.1 (2024-01-20)

Bug fixes
Performance improvements
Added health checks
Improved error handling

Version 1.1.0 (Planned)

Referral system
Advanced statistics
Bulk operations
API improvements


–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–∞: 2024-01-15
–í–µ—Ä—Å—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó: 1.0.0
–ê–≤—Ç–æ—Ä: SocialBoost Development Team